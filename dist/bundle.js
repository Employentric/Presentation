!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1);$(document).ready(function(){firebase.initializeApp({apiKey:"AIzaSyAZ9w3hQPnIWxgY-KKl3awkJirnN5mvG3w",authDomain:"proj-1-8fff4.firebaseapp.com",databaseURL:"https://proj-1-8fff4.firebaseio.com",projectId:"proj-1-8fff4",storageBucket:"proj-1-8fff4.appspot.com",messagingSenderId:"833251081928"});var e=firebase.database();const t=firebase.initializeApp({apiKey:"AIzaSyBLZjIB6nUrsTKU2lHJuRLoPgNosQfAquE",authDomain:"ucb-project-search-event.firebaseapp.com",databaseURL:"https://ucb-project-search-event.firebaseio.com",projectId:"ucb-project-search-event",storageBucket:"ucb-project-search-event.appspot.com",messagingSenderId:"830770899521"},"userdata");var n=firebase.database(t),o=void 0,r=void 0,s=function(e,t){localStorage.setItem(e,t)},a=function(e){return localStorage.getItem(e)},i=function(e){console.log(e),localStorage.removeItem(e)};o=a("loggedInUserID"),r=a("loggedInUserName"),console.log(o),null!==o&&null!==r&&($("#sign-in-form").empty(),$(".dropdown").text("Welcome! "+r),$("#logout").css("visibility","visible"),$("#my-events").css("visibility","visible"));var l={url:"https://api.seatgeek.com/2/events?client_id=MTM3NTY1NjV8MTU0MTAzNjQ2MC42NA",rangeInMiles:0,sortField:"datetime_local",sortOrder:"desc",events:[],urlStr:"",getEvents:function(t,n,r){this.rangeInMiles=t,this.sortOrder=n?"asc":"desc",$.getJSON({url:"http://ipinfo.io",method:"GET"}).then(function(t){var n=t.ip;console.log(n);for(var s="",a=0;a<r.length;a++)s=s+"&taxonomies.name="+r[a];l.urlStr=l.url+"&geoip="+n+"&range="+l.rangeInMiles+"mi&sort="+l.sortField+"."+l.sortOrder+s,$.ajax({url:l.url+"&geoip="+n+"&range="+l.rangeInMiles+"mi&sort="+l.sortField+"."+l.sortOrder+s,method:"GET"}).then(function(t){l.setEvents(t.events),function(t){c(t.events,$(".events")),$(".eventContainer").on("click",function(t){if(null!==o){var n=$(this),r=e.ref(o);null===r&&e.ref(o).set({selectedEvents:selectedEvents});var s=n.data("event");r.once("value").then(function(t){var r=t.child("selectedEvents").val();null===r&&(r=[]),r.includes(s)||r.push(s),e.ref(o).set({selectedEvents:r}),n.remove()})}})}(l)})})},setEvents:function(e){this.events=e}};function c(e,t){if(null!==e)for(var n=0;n<e.length;n++){var o=$("<div>"),r=$("<div>"),s=$("<div>"),a=$("<div>"),i=$("<div>"),l=e[n],c=(l.id,$("<a class='ticket-link' href="+e[n].url+" target='_blank'>Find Tickets</a>"));i=moment(l.datetime_local).format("llll"),r.addClass("eventContainer"),a.addClass("title"),s.addClass("eventVenue"),o.addClass("eventButton"),r.data("event",l),s.text(e[n].venue.name),a.text(l.title),r.append(a),r.append(s),o.append(r),r.append(i),r.append(c),t.append(o)}}$("#sign-in").on("click",function(e){e.preventDefault();var t=$("#username").val().trim(),n=$("#password").val().trim();d(t,n)}),$("#sigup-submit").on("click",function(e){e.preventDefault();var t=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+e()+e()+e()+e()+e()+e()}(),n=$("#signup-username").val(),o=$("#signup-password").val();u({userID:t,userName:n,password:o}),s("newUserId",t),s("newUserName",n),window.location.href="index.html"}),$("#logout").on("click",function(){o=void 0,r=void 0,i("loggedInUserID"),i("loggedInUserName"),location.href="index.html"}),$("#search").on("click",function(e){console.log(o),console.log(r),$(".events").empty(),$(".checkmark").prop("checked",!1),e.preventDefault();var t=[];$.each($("input:checked"),function(){var e=$(this).val();t.push(e),$(".events").empty()}),l.getEvents(11,!0,t),console.log(l)}),e.ref().on("value",function(t){null!==o&&e.ref(o).on("value",function(e){c(e.child("selectedEvents").val(),$(".myEvents"))})}),$("#cancel").on("click",function(){$(".myEvents").empty()});var u=function(e){console.log(e),n.ref().push({userID:e.userID,userName:e.userName,password:e.password})},d=function(e,t){var a=!1;n.ref().orderByChild("userName").equalTo(e).on("value",function(e){e.forEach(function(e){t===e.val().password&&(console.log("User and Password Match"),o=e.val().userID,r=e.val().userName,a=!0,$("#sign-in-form").empty(),$(".dropdown").text("Welcome! "+r),$("#logout").css("visibility","visible"),$("#my-events").css("visibility","visible"),s("loggedInUserID",o),s("loggedInUserName",r))})});return a}})},function(e,t){console.log("Storgae Helper Added")}]);