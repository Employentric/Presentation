{"version":3,"sources":["assets/javascript/storageHelper.js","assets/javascript/app.js"],"names":["config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","firebase","initializeApp","getAllItemsFB","console","log","database","setLocalStorage","key","val","localStorage","setItem","getLocalStorage","getItem","deleteLocalStorage","removeItem","module","exports","storageHelper","require","$","document","ready","seatgeek","url","rangeInMiles","sortField","sortOrder","events","urlStr","getEvents","rangeInMile","isAsc","taxonomies","ajax","method","then","res","ip","taxonomiesStr","i","length","setEvents","on","event","preventDefault","each","search","push","renderResults","mainEvents","addClass","append","title","eventsList","eventDate","datetime_local","html"],"mappings":";AAEI,IAAIA,EAAS,CACTC,OAAQ,0CACRC,WAAY,sCACZC,YAAa,6CACbC,UAAW,sBACXC,cAAe,kCACfC,kBAAmB,gBAEvBC,SAASC,cAAcR,GAE3B,IAAIS,EAAgB,WAChBC,QAAQC,IAAI,MACGJ,SAASK,YAIxBC,EAAkB,SAAUC,EAAIC,GACjCC,aAAaC,QAAQH,EAAIC,IAIxBG,EAAkB,SAASJ,GAC3BE,aAAaG,QAAQL,IAIrBM,EAAqB,SAASN,GAC9BE,aAAaK,WAAWP,IAG5BQ,OAAOC,QAAU,CACbV,gBAAgBA,EAChBK,gBAAgBA,EAChBE,mBAAmBA,EACnBX,cAAcA;;ACpClB,IAAMe,EAAgBC,QAAQ,mBAE9BC,EAAEC,UAAUC,MAAM,WAKhBJ,EAAcX,gBAAgB,OAAO,SAUrCN,SAASC,cARI,CACXP,OAAQ,0CACRC,WAAY,sCACZC,YAAa,6CACbC,UAAW,sBACXC,cAAe,kCACfC,kBAAmB,iBAINC,SAASK,WAApBA,IAQAiB,EAAW,CACbC,IAAK,6EACLC,aAAc,EACdC,UAAW,iBACXC,UAAW,OACXC,OAAQ,GACRC,OAAQ,GACRC,UAAW,SAAUC,EAAaC,EAAOC,GAElCR,KAAAA,aAAeM,EAGbJ,KAAAA,UADHK,EACe,MAEA,OAInBZ,EAAEc,KAAK,CACLV,IAAK,qCACLW,OAAQ,QACPC,KAAK,SAAUC,GAGX,IAFDC,IAAAA,EAAKD,EAAIC,GACTC,EAAgB,GACXC,EAAI,EAAGA,EAAIP,EAAWQ,OAAQD,IACrCD,EAAgBA,EAAgB,oBAAsBN,EAAWO,GAEnEjB,EAASM,OAASN,EAASC,IAAM,UAAYc,EAAK,UAAYf,EAASE,aAAe,WACzEF,EAASG,UAAY,IAAMH,EAASI,UAAYY,EAC7DnB,EAAEc,KAAK,CACLV,IAAKD,EAASC,IAAM,UAAYc,EAAK,UAAYf,EAASE,aAAe,WAC5DF,EAASG,UAAY,IAAMH,EAASI,UAAYY,EAC7DJ,OAAQ,QACPC,KAAK,SAAUC,GAChBd,EAASmB,UAAUL,EAAIT,aAK7Bc,UAAW,SAAUd,GAEdA,KAAAA,OAASA,IAKlBR,EAAE,WAAWuB,GAAG,QAAS,SAAUC,GACjCA,EAAMC,iBACFZ,IAAAA,EAAa,GACjBb,EAAE0B,KAAK1B,EAAE,iBAAkB,WACrB2B,IAAAA,EAAS3B,EAAE,MAAMX,MACrBwB,EAAWe,KAAKD,GAChB3C,QAAQC,IAAI0C,KAGdxB,EAASO,UAAU,IAAI,EAAOG,GAC9B7B,QAAQC,IAAIkB,GAIL0B,SAAc1B,GAChB,IAAA,IAAIiB,EAAI,EAAGA,EAAIjB,EAASK,OAAOa,OAAQD,IAAK,CAC/CpC,QAAQC,IAAIkB,EAASK,OAAOY,IACxBU,IAAAA,EAAa9B,EAAE,QACnB8B,EAAWC,SAAS,cACpB/B,EAAE,WAAWgC,OAAOF,GAEhBG,IAAAA,EAAQ9B,EAASK,OAAOY,GAAGa,MAC3BC,EAAalC,EAAE,sCACnBkC,EAAWF,OAAO,qCAAuCC,EAAQ,WAE7DE,IAAAA,EAAYhC,EAASK,OAAOY,GAAGgB,eACnCF,EAAWF,OAAO,OAASG,EAAY,SAEvCL,EAAWE,OAAOE,GAClBlC,EAAE,WAAWqC,KAAKP,IAlBpBD,CAAc1B","file":"app.90cead9b.map","sourceRoot":"..","sourcesContent":["/* Initialize Firebase*/\n\n    var config = {\n        apiKey: \"AIzaSyAaBxgXJBVE_9C8qzRu_ebV1sscAVqiers\",\n        authDomain: \"group-project-4da86.firebaseapp.com\",\n        databaseURL: \"https://group-project-4da86.firebaseio.com\",\n        projectId: \"group-project-4da86\",\n        storageBucket: \"group-project-4da86.appspot.com\",\n        messagingSenderId: \"847074672907\"\n      };\n    firebase.initializeApp(config);\n\nvar getAllItemsFB = function(){\n    console.log(\"FB\");\n    var database = firebase.database();\n}\n\n/* add an item to the local storage */\nvar setLocalStorage = function (key,val){\n   localStorage.setItem(key,val);\n};\n\n/* retreives an item from the local storage based on the key */\nvar getLocalStorage = function(key){\n    localStorage.getItem(key);\n}\n\n/* removes an item from the local storage based on the key */\nvar deleteLocalStorage = function(key){\n    localStorage.removeItem(key);\n}\n\nmodule.exports = {\n    setLocalStorage:setLocalStorage,\n    getLocalStorage:getLocalStorage,\n    deleteLocalStorage:deleteLocalStorage,\n    getAllItemsFB:getAllItemsFB\n}\n","const storageHelper = require('./storageHelper');\n\n$(document).ready(function () {\n  /**\n   * \n   * GLOBALS\n   */\n  storageHelper.setLocalStorage('name','james');\n  //  Initialize Firebase\n  var config = {\n    apiKey: \"AIzaSyAaBxgXJBVE_9C8qzRu_ebV1sscAVqiers\",\n    authDomain: \"group-project-4da86.firebaseapp.com\",\n    databaseURL: \"https://group-project-4da86.firebaseio.com\",\n    projectId: \"group-project-4da86\",\n    storageBucket: \"group-project-4da86.appspot.com\",\n    messagingSenderId: \"847074672907\"\n  };\n  firebase.initializeApp(config);\n\n  var database = firebase.database();\n\n  /**\n   *  geoIP defaults to empty string\n   *  rangeInMile defaults to 10\n   *  sortField defaults to datetime_local\n   *  sortOrder defaults to desc the other option is asc\n   */\n  var seatgeek = {\n    url: \"https://api.seatgeek.com/2/events?client_id=MTM3NTY1NjV8MTU0MTAzNjQ2MC42NA\",\n    rangeInMiles: 0,\n    sortField: \"datetime_local\",\n    sortOrder: \"desc\",\n    events: [],\n    urlStr: \"\",\n    getEvents: function (rangeInMile, isAsc, taxonomies) {\n      // validation\n      this.rangeInMiles = rangeInMile;\n      // sort order \n      if (isAsc) {\n        this.sortOrder = \"asc\";\n      } else {\n        this.sortOrder = \"desc\";\n      }\n\n      // api\n      $.ajax({\n        url: \"https://api.ipify.org/?format=json\",\n        method: \"GET\"\n      }).then(function (res) {\n        var ip = res.ip;\n        var taxonomiesStr = '';\n        for (var i = 0; i < taxonomies.length; i++) {\n          taxonomiesStr = taxonomiesStr + \"&taxonomies.name=\" + taxonomies[i];\n        }\n        seatgeek.urlStr = seatgeek.url + \"&geoip=\" + ip + \"&range=\" + seatgeek.rangeInMiles + \"mi\" +\n          \"&sort=\" + seatgeek.sortField + \".\" + seatgeek.sortOrder + taxonomiesStr;\n        $.ajax({\n          url: seatgeek.url + \"&geoip=\" + ip + \"&range=\" + seatgeek.rangeInMiles + \"mi\" +\n            \"&sort=\" + seatgeek.sortField + \".\" + seatgeek.sortOrder + taxonomiesStr,\n          method: \"GET\"\n        }).then(function (res) {\n          seatgeek.setEvents(res.events);\n        });\n\n      });\n    },\n    setEvents: function (events) {\n\n      this.events = events;\n    }\n  };\n\n  // click function rendering search input. \n  $(\"#search\").on(\"click\", function (event) {\n    event.preventDefault();\n    var taxonomies = [];\n    $.each($(\"input:checked\"), function () {\n      var search = $(this).val();\n      taxonomies.push(search);\n      console.log(search);\n    });\n\n    seatgeek.getEvents(11, false, taxonomies);\n    console.log(seatgeek);\n    renderResults(seatgeek);\n  });\n  // function to render api results to ui\n  function renderResults(seatgeek) {\n    for (var i = 0; i < seatgeek.events.length; i++) {\n      console.log(seatgeek.events[i]);\n      var mainEvents = $(\"<ul>\");\n      mainEvents.addClass(\"list-group\");\n      $(\".events\").append(mainEvents);\n\n      var title = seatgeek.events[i].title;\n      var eventsList = $(\"<li class='event-list-title'></li>\");\n      eventsList.append(\"<span class='label label-primary'>\" + title + \"</span>\");\n\n      var eventDate = seatgeek.events[i].datetime_local;\n      eventsList.append(\"<h5>\" + eventDate + \"</h5>\");\n\n      mainEvents.append(eventsList);\n      $(\".events\").html(mainEvents);\n    };\n\n  };\n\n  function populateList(response) {\n    for (var i = 0; i < response.events.length; i++) {\n      var div = $(\"<div>\");\n      var row = $(\"<div>\");\n      var title = $(\"<div>\");\n\n      row.addClass(\"eventContainer\")\n      title.addClass(\"title\")\n      div.addClass(\"eventButton\");\n\n\n      var event = response.events[i];\n\n      title.text(event.title);\n      row.append(title);\n      div.append(row);\n      $(\".events\").append(div);\n    }\n\n  }\n\n  /********** Storage Helper's ************/\n\n  /* Get's all values from Fire Base */\n  var getAllValuesFB = function () {\n\n    database.ref().on(\"value\", function (snapshot) {\n      snapshot.forEach(function (childSnapshot) {\n        var childData = childSnapshot.val();\n        console.log(childData);\n      }, function (errorObject) {\n        console.log(\"Error \" + errorObject.code)\n      });\n    });\n  };\n\n  /* Get's child from Fire Base */\n  var checkChildAdded = function () {\n\n    database.ref().on(\"child_added\", function (snapshot) {\n      var val = snapshot.val();\n      console.log(val);\n\n    }, function (errorObject) {\n      console.log(\"Error \" + errorObject.code);\n    });\n\n  }\n\n\n  /* add an item to the local storage */\n  var setLocalStorage = function (key, val) {\n    localStorage.setItem(key, value);\n  };\n\n  /* retreives an item from the local storage based on the key */\n  var getLocalStorage = function (key) {\n    localStorage.getItem(key);\n  }\n\n  /* removes an item from the local storage based on the key */\n  var deleteLocalStorage = function (key) {\n    localStorage.removeItem(key);\n  }\n\n});\n\n\n"]}